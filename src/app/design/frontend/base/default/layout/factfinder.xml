<?xml version="1.0"?>

<layout>
    <!-- Search Result Page with Toolbar and Campaigns -->
    <catalogsearch_result_index translate="label">
        <reference name="head">
            <action method="addCss">
                <stylesheet>css/factfinder/product_list.css</stylesheet>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/campaign.css</stylesheet>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/filter.css</stylesheet>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/toolbar.css</stylesheet>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/pager.css</stylesheet>
            </action>
        </reference>
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
        </reference>
        <reference name="catalogsearch.leftnav">
            <action method="setTemplate">
                <template>factfinder/catalog/layer/view.phtml</template>
            </action>
        </reference>
        <reference name="search.result">
            <action method="setTemplate">
                <template>factfinder/catalogsearch/result.phtml</template>
            </action>
            <block type="catalog/product_list" name="search_result_list" template="factfinder/catalog/product/list.phtml">
                <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="factfinder/catalog/product/list/toolbar.phtml" />
            </block>
        </reference>
    </catalogsearch_result_index>

    <!-- Product Details Campaign and Similar Products -->
    <catalog_product_view translate="label">
        <reference name="head">
            <action method="addCss">
                <stylesheet>css/factfinder/product_list.css</stylesheet>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/campaign.css</stylesheet>
            </action>
        </reference>
        <reference name="content">
            <block type="catalog/product_view" name="factfinder_roduct_campaign" template="factfinder/campaign/product.phtml" />
            <block type="catalog/product_view" name="factfinder_roduct_similar_products" template="factfinder/catalog/product/similar_products.phtml" />
            <block type="catalog/product_view" name="factfinder_product_upsell" template="factfinder/catalog/product/list/upsell.phtml" />
        </reference>
    </catalog_product_view>

    <!-- Landing Page Campaign -->
    <cms_index_index>
        <reference name="head">
            <action method="addCss">
                <stylesheet>css/factfinder/product_list.css</stylesheet>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/campaign.css</stylesheet>
            </action>
        </reference>
        <reference name="content">
            <block type="core/template" name="factfinder_landing_page_campaign" template="factfinder/campaign/landing_page.phtml"/>
        </reference>
    </cms_index_index>

    <!-- Cart Campaign and Tracking -->
    <checkout_cart_index>
        <reference name="head">
            <action method="addCss">
                <stylesheet>css/factfinder/product_list.css</stylesheet>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/campaign.css</stylesheet>
            </action>
        </reference>
        <reference name="content">
            <block type="checkout/cart" name="factfinder_cart_campaign" template="factfinder/campaign/cart.phtml" />
            <block type="checkout/cart" name="factfinder_cart_tracking" template="factfinder/cart/tracking.phtml" />
        </reference>
    </checkout_cart_index>

    <!-- Checkout Tracking -->
    <checkout_onepage_success>
        <reference name="content">
            <block type="checkout/onepage_success" name="factfinder_checkout_success" template="factfinder/checkout/success.phtml"/>
        </reference>
    </checkout_onepage_success>

    <!-- Default css and js -->
    <default>
        <reference name="head">
            <action method="addJs">
                <script>factfinder/top.js</script>
            </action>
            <action method="addJs">
                <script>factfinder/search-redirect.js</script>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/suggest.css</stylesheet>
            </action>
            <action method="addCss">
                <stylesheet>css/factfinder/nav.css</stylesheet>
            </action>
        </reference>

        <!-- Search Box and Suggest -->
        <reference name="header">
            <block type="core/template" name="top.search" as="topSearch">
                <action method="setTemplate">
                    <template>factfinder/catalogsearch/form.mini.phtml</template>
                </action>
            </block>
        </reference>

        <!-- Header Navigation -->
        <reference name="page/html_header">
            <block type="core/text_list" name="top.menu" as="topMenu" translate="label">
                <block type="page/html_topmenu" name="catalog.topnav">
                    <action method="setTemplate">
                        <template>factfinder/page/html/topmenu.phtml</template>
                    </action>
                </block>
            </block>
        </reference>

        <!-- Communication -->
        <reference name="after_body_start">
            <block type="core/template" name="after_body_start_script">
                <action method="setTemplate">
                    <template>factfinder/communication/communication.phtml</template>
                </action>
            </block>
            <block type="core/template" name="after_body_start_script_elements">
                <action method="setTemplate">
                    <template>factfinder/communication/elements.phtml</template>
                </action>
            </block>
        </reference>
    </default>
</layout>
